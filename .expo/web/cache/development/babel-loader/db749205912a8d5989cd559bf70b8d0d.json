{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { Formik } from \"formik\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport FormikTextInput from \"./FormikTextInput\";\nimport { Button } from \"@react-native-material/core\";\nimport React, { useState } from \"react\";\nimport { useNavigate } from 'react-router-native';\nimport * as yup from 'yup';\nimport useSignIn from \"../hooks/useSignIn\";\nimport AuthStorage from \"../utils/authStorage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar initialValues = {\n  username: '',\n  password: ''\n};\nvar styles = StyleSheet.create({\n  container: {\n    padding: 5,\n    backgroundColor: 'white'\n  },\n  submit: {\n    padding: 5\n  },\n  fields: {\n    padding: 5\n  }\n});\nconsole.log(useSignIn.signIn);\nvar validationSchema = yup.object().shape({\n  username: yup.string().required('Username is required'),\n  password: yup.string().required('Password is required')\n});\nvar SignInForm = function SignInForm(_ref) {\n  var onSubmit = _ref.onSubmit,\n    showPassword = _ref.showPassword,\n    passwordVisibilityToggle = _ref.passwordVisibilityToggle;\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(FormikTextInput, {\n      name: \"username\",\n      placeholder: \"Username\",\n      style: styles.fields\n    }), _jsx(FormikTextInput, {\n      name: \"password\",\n      placeholder: \"Password\",\n      showPassword: showPassword,\n      style: styles.fields\n    }), _jsx(View, {\n      style: styles.submit,\n      children: _jsx(Button, {\n        title: \"Sign in\",\n        onPress: function onPress() {\n          onSubmit();\n          passwordVisibilityToggle();\n        },\n        style: styles.submit\n      })\n    })]\n  });\n};\nvar SignIn = function SignIn() {\n  var navigate = useNavigate();\n  var _useSignIn = useSignIn(),\n    _useSignIn2 = _slicedToArray(_useSignIn, 1),\n    signIn = _useSignIn2[0];\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    showPassword = _useState2[0],\n    setShowPassword = _useState2[1];\n  var passwordVisibilityToggle = function passwordVisibilityToggle() {\n    setShowPassword(showPassword === true ? false : true);\n  };\n  var onSubmit = function () {\n    var _ref2 = _asyncToGenerator(function* (values) {\n      var username = String(values.username);\n      var password = String(values.password);\n      if (username && password) {\n        try {\n          var _yield$signIn = yield signIn({\n              username: username,\n              password: password\n            }),\n            data = _yield$signIn.data;\n          navigate('/');\n          console.log('sigin data: ', data);\n        } catch (e) {\n          console.log(e, 'error signing in');\n        }\n      }\n    });\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsx(Formik, {\n    initialValues: initialValues,\n    onSubmit: onSubmit,\n    validationSchema: validationSchema,\n    children: function children(_ref3) {\n      var handleSubmit = _ref3.handleSubmit;\n      return _jsx(SignInForm, {\n        onSubmit: handleSubmit,\n        showPassword: showPassword,\n        passwordVisibilityToggle: passwordVisibilityToggle\n      });\n    }\n  });\n};\nexport default SignIn;","map":{"version":3,"names":["Formik","FormikTextInput","Button","React","useState","useNavigate","yup","useSignIn","AuthStorage","initialValues","username","password","styles","StyleSheet","create","container","padding","backgroundColor","submit","fields","console","log","signIn","validationSchema","object","shape","string","required","SignInForm","onSubmit","showPassword","passwordVisibilityToggle","SignIn","navigate","setShowPassword","values","String","data","e","handleSubmit"],"sources":["D:/Ohjelmointi/Full Stack Open/Exercises/Part 10/rate-repository-app/src/components/SignIn.jsx"],"sourcesContent":["import { Formik } from \"formik\";\nimport { Pressable, Text, View, StyleSheet, Platform } from \"react-native\";\nimport FormikTextInput from \"./FormikTextInput\";\nimport { Button } from \"@react-native-material/core\";\nimport React, { useState } from \"react\";\nimport { useNavigate } from 'react-router-native';\nimport * as yup from 'yup';\n\nimport useSignIn from '../hooks/useSignIn';\nimport AuthStorage from '../utils/authStorage';\n\nconst initialValues = {\n  username: '',\n  password: '',\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: 5,\n    backgroundColor: 'white',\n  },\n  submit: {\n    padding: 5,\n  },\n  fields: {\n    padding: 5,\n  },\n});\n\nconsole.log(useSignIn.signIn)\n\nconst validationSchema = yup.object().shape({\n  username: yup\n    .string()\n    .required('Username is required'),\n  password: yup\n    .string()\n    .required('Password is required'),\n});\n\nconst SignInForm = ({ onSubmit, showPassword, passwordVisibilityToggle }) => {\n  return(\n    <View style={styles.container}>\n      <FormikTextInput name=\"username\" placeholder=\"Username\" style={styles.fields} />\n      <FormikTextInput name=\"password\" placeholder=\"Password\" showPassword={showPassword} style={styles.fields} />\n      <View style={styles.submit}><Button title=\"Sign in\" onPress={() => {onSubmit(); passwordVisibilityToggle()}} style={styles.submit} /></View>\n    </View>\n  )\n}\n\nconst SignIn = () => {\n  const navigate = useNavigate();\n  const [signIn] = useSignIn();\n  const [showPassword, setShowPassword] = useState(true);\n\n  const passwordVisibilityToggle = () => {\n    setShowPassword(showPassword === true ? false : true);\n  };\n\n  const onSubmit = async values => {\n    const username = String(values.username);\n    const password = String(values.password);\n\n    if (username && password) {\n      try {\n        const { data } = await signIn({ username, password });\n        navigate('/');\n        console.log('sigin data: ',data);\n      } catch (e) {\n        console.log(e,'error signing in');\n      }\n    }\n  };\n\n  return (\n    <Formik initialValues={initialValues} onSubmit={onSubmit} validationSchema={validationSchema}>\n      {({ handleSubmit }) => <SignInForm onSubmit={handleSubmit} showPassword={showPassword} passwordVisibilityToggle={passwordVisibilityToggle} />}\n    </Formik>\n  );\n};\n\nexport default SignIn;"],"mappings":"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"},"metadata":{},"sourceType":"module"}