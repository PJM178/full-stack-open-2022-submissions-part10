{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Link } from 'react-router-native';\nimport Constants from 'expo-constants';\nimport theme from \"../theme\";\nimport AppBarTab from \"./AppBarTab\";\nimport useAuthStorage from \"../hooks/useAuthStorage\";\nimport useCurrentUserInfo from \"../hooks/useCurrentUserInfo\";\nimport { useApolloClient } from '@apollo/client';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    paddingTop: Constants.statusBarHeight / 2,\n    backgroundColor: theme.appBar.container.colors.background\n  },\n  text: {\n    paddingTop: Constants.statusBarHeight / 2,\n    color: theme.appBar.text.colors.primary,\n    marginBottom: Constants.statusBarHeight / 2,\n    marginLeft: Constants.statusBarHeight / 4,\n    marginRight: Constants.statusBarHeight / 4\n  }\n});\nvar AppBar = function AppBar() {\n  var apolloClient = useApolloClient();\n  var _useCurrentUserInfo = useCurrentUserInfo(),\n    currentUser = _useCurrentUserInfo.currentUser,\n    error = _useCurrentUserInfo.error,\n    loading = _useCurrentUserInfo.loading;\n  var authStorage = useAuthStorage();\n  var handleLogOut = function () {\n    var _ref = _asyncToGenerator(function* () {\n      yield authStorage.removeAccessToken();\n      yield apolloClient.resetStore();\n    });\n    return function handleLogOut() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  console.log('appbar current user:', currentUser);\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsxs(ScrollView, {\n      horizontal: true,\n      children: [_jsx(Link, {\n        to: '/',\n        children: _jsx(AppBarTab, {\n          style: styles.text,\n          text: 'Repositories'\n        })\n      }), currentUser !== undefined && currentUser.me !== null ? _jsx(Link, {\n        onPress: handleLogOut,\n        to: '/',\n        children: _jsx(AppBarTab, {\n          style: styles.text,\n          text: 'Sign Out'\n        })\n      }) : _jsx(Link, {\n        to: '/signin',\n        children: _jsx(AppBarTab, {\n          style: styles.text,\n          text: 'Sign In'\n        })\n      }), _jsx(Link, {\n        to: '/bmicalculator',\n        children: _jsx(AppBarTab, {\n          style: styles.text,\n          text: 'BMI Calculator'\n        })\n      })]\n    })\n  });\n};\nexport default AppBar;","map":{"version":3,"names":["Link","Constants","theme","AppBarTab","useAuthStorage","useCurrentUserInfo","useApolloClient","styles","StyleSheet","create","container","flexDirection","paddingTop","statusBarHeight","backgroundColor","appBar","colors","background","text","color","primary","marginBottom","marginLeft","marginRight","AppBar","apolloClient","currentUser","error","loading","authStorage","handleLogOut","removeAccessToken","resetStore","console","log","undefined","me"],"sources":["D:/Ohjelmointi/Full Stack Open/Exercises/Part 10/rate-repository-app/src/components/AppBar.jsx"],"sourcesContent":["import { View, StyleSheet, Text, ScrollView } from 'react-native';\nimport { Link } from 'react-router-native';\nimport Constants from 'expo-constants';\n\nimport theme from '../theme';\nimport AppBarTab from './AppBarTab';\nimport useAuthStorage from '../hooks/useAuthStorage';\nimport useCurrentUserInfo from '../hooks/useCurrentUserInfo';\nimport { useApolloClient } from '@apollo/client';\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    paddingTop: Constants.statusBarHeight/2,\n    backgroundColor: theme.appBar.container.colors.background,\n  },\n  text: {\n    paddingTop: Constants.statusBarHeight/2,\n    color: theme.appBar.text.colors.primary,\n    marginBottom: Constants.statusBarHeight/2,\n    marginLeft: Constants.statusBarHeight/4,\n    marginRight: Constants.statusBarHeight/4,\n  }\n});\n\nconst AppBar = () => {\n  const apolloClient = useApolloClient();\n  const { currentUser, error, loading } = useCurrentUserInfo();\n  const authStorage = useAuthStorage();\n\n  const handleLogOut = async () => {\n    await authStorage.removeAccessToken();\n    await apolloClient.resetStore();\n  };\n  \n  console.log('appbar current user:',currentUser);\n  return (\n    <View style={styles.container}>\n      <ScrollView horizontal>\n        <Link to={'/'}>\n          <AppBarTab style={styles.text} text={'Repositories'}  />\n        </Link>\n        {currentUser !== undefined && currentUser.me !== null\n          ? <Link onPress={handleLogOut}  to={'/'}>\n              <AppBarTab style={styles.text} text={'Sign Out'}  />\n            </Link>\n          : <Link to={'/signin'}>\n              <AppBarTab style={styles.text} text={'Sign In'}  />\n            </Link>\n        }\n        <Link to={'/bmicalculator'}>\n          <AppBarTab style={styles.text} text={'BMI Calculator'}  />\n        </Link>\n      </ScrollView>\n    </View>\n  );\n};\n\nexport default AppBar;"],"mappings":";;;;;AACA,SAASA,IAAI,QAAQ,qBAAqB;AAC1C,OAAOC,SAAS,MAAM,gBAAgB;AAEtC,OAAOC,KAAK;AACZ,OAAOC,SAAS;AAChB,OAAOC,cAAc;AACrB,OAAOC,kBAAkB;AACzB,SAASC,eAAe,QAAQ,gBAAgB;AAAC;AAAA;AAEjD,IAAMC,MAAM,GAAGC,UAAU,CAACC,MAAM,CAAC;EAC/BC,SAAS,EAAE;IACTC,aAAa,EAAE,KAAK;IACpBC,UAAU,EAAEX,SAAS,CAACY,eAAe,GAAC,CAAC;IACvCC,eAAe,EAAEZ,KAAK,CAACa,MAAM,CAACL,SAAS,CAACM,MAAM,CAACC;EACjD,CAAC;EACDC,IAAI,EAAE;IACJN,UAAU,EAAEX,SAAS,CAACY,eAAe,GAAC,CAAC;IACvCM,KAAK,EAAEjB,KAAK,CAACa,MAAM,CAACG,IAAI,CAACF,MAAM,CAACI,OAAO;IACvCC,YAAY,EAAEpB,SAAS,CAACY,eAAe,GAAC,CAAC;IACzCS,UAAU,EAAErB,SAAS,CAACY,eAAe,GAAC,CAAC;IACvCU,WAAW,EAAEtB,SAAS,CAACY,eAAe,GAAC;EACzC;AACF,CAAC,CAAC;AAEF,IAAMW,MAAM,GAAG,SAATA,MAAM,GAAS;EACnB,IAAMC,YAAY,GAAGnB,eAAe,EAAE;EACtC,0BAAwCD,kBAAkB,EAAE;IAApDqB,WAAW,uBAAXA,WAAW;IAAEC,KAAK,uBAALA,KAAK;IAAEC,OAAO,uBAAPA,OAAO;EACnC,IAAMC,WAAW,GAAGzB,cAAc,EAAE;EAEpC,IAAM0B,YAAY;IAAA,6BAAG,aAAY;MAC/B,MAAMD,WAAW,CAACE,iBAAiB,EAAE;MACrC,MAAMN,YAAY,CAACO,UAAU,EAAE;IACjC,CAAC;IAAA,gBAHKF,YAAY;MAAA;IAAA;EAAA,GAGjB;EAEDG,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAACR,WAAW,CAAC;EAC/C,OACE,KAAC,IAAI;IAAC,KAAK,EAAEnB,MAAM,CAACG,SAAU;IAAA,UAC5B,MAAC,UAAU;MAAC,UAAU;MAAA,WACpB,KAAC,IAAI;QAAC,EAAE,EAAE,GAAI;QAAA,UACZ,KAAC,SAAS;UAAC,KAAK,EAAEH,MAAM,CAACW,IAAK;UAAC,IAAI,EAAE;QAAe;MAAI,EACnD,EACNQ,WAAW,KAAKS,SAAS,IAAIT,WAAW,CAACU,EAAE,KAAK,IAAI,GACjD,KAAC,IAAI;QAAC,OAAO,EAAEN,YAAa;QAAE,EAAE,EAAE,GAAI;QAAA,UACpC,KAAC,SAAS;UAAC,KAAK,EAAEvB,MAAM,CAACW,IAAK;UAAC,IAAI,EAAE;QAAW;MAAI,EAC/C,GACP,KAAC,IAAI;QAAC,EAAE,EAAE,SAAU;QAAA,UAClB,KAAC,SAAS;UAAC,KAAK,EAAEX,MAAM,CAACW,IAAK;UAAC,IAAI,EAAE;QAAU;MAAI,EAC9C,EAEX,KAAC,IAAI;QAAC,EAAE,EAAE,gBAAiB;QAAA,UACzB,KAAC,SAAS;UAAC,KAAK,EAAEX,MAAM,CAACW,IAAK;UAAC,IAAI,EAAE;QAAiB;MAAI,EACrD;IAAA;EACI,EACR;AAEX,CAAC;AAED,eAAeM,MAAM"},"metadata":{},"sourceType":"module"}